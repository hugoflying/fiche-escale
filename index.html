<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SUIVI PERFORMANCE</title>
<style>
/* RESET & BASE */
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
    font-family: Arial, sans-serif;
    background: #f8f9fa;
    color: #222;
    padding: 10px;
}
body.dark { background: #121212; color: #f8f9fa; }

h1 { text-align: center; margin: 10px 0 15px; }

section {
    background: #fff;
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 15px;
}
body.dark section { background: #1e1e1e; }

h2 {
    font-size: 1.2rem;
    margin-bottom: 10px;
    border-bottom: 1px solid #ccc;
    padding-bottom: 5px;
}

/* GRILLES */
.form-grid { display: flex; flex-wrap: wrap; gap: 10px; }
.form-group {
    flex: 1 1 calc(50% - 10px); /* 2 colonnes */
    min-width: 150px;
}
.form-group-3col {
    flex: 1 1 calc(33.33% - 10px); /* 3 colonnes */
    min-width: 120px;
}
.form-group label { font-size: 0.9rem; display: block; margin-bottom: 3px; }
input, select, textarea {
    width: 100%;
    padding: 6px;
    font-size: 0.95rem;
    border: 1px solid #ccc;
    border-radius: 4px;
}
textarea { resize: vertical; min-height: 60px; }

/* BOUTONS ACTIONS HORAIRES */
.btn-actions {
    display: flex;
    justify-content: space-between;
    gap: 5px;
    margin-top: 3px;
}
button.action {
    flex: 1;
    padding: 4px;
    font-size: 0.8rem;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}
button.minus { background: #555; color: white; }
button.now   { background: #1976d2; color: white; }
button.plus  { background: #555; color: white; }

/* VALIDATION */
#validate {
    width: 100%;
    padding: 12px;
    font-size: 1.2rem;
    border: none;
    border-radius: 6px;
    background: #4caf50;
    color: white;
    cursor: pointer;
    margin-top: 10px;
}

/* TIMERS H-15 / LID */
.timer-box {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 15px;
}
.timer {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
}
.timer-label { font-weight: bold; font-size: 1rem; }
.timer-value {
    background: #d32f2f;
    color: #fff;
    font-weight: bold;
    padding: 10px 20px;
    border-radius: 6px;
    font-size: 1.1rem;
}

/* TOGGLES */
.toggle-container {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
}
.toggle-container button {
    padding: 5px 10px;
    font-size: 0.9rem;
}
</style>
</head>
<body>

<div class="toggle-container">
    <button onclick="toggleDarkMode()">üåô / ‚òÄÔ∏è</button>
    <button onclick="toggleTimeMode()">Local / UTC</button>
</div>

<h1>SUIVI PERFORMANCE</h1>

<div class="timer-box">
    <div class="timer">
        <div class="timer-label">H-15</div>
        <div id="timer-h15" class="timer-value">--:--</div>
    </div>
    <div class="timer">
        <div class="timer-label">LID</div>
        <div id="timer-h8" class="timer-value">--:--</div>
    </div>
</div>

<!-- INFO VOL -->
<section>
    <h2>INFO VOL</h2>
    <div class="form-grid">
        <div class="form-group"><label>Date<input type="date" id="Date"></label></div>
        <div class="form-group"><label>Cie
            <select id="Cie">
                <option>FR</option><option>RK</option><option>W4</option><option>W6</option>
                <option>H4</option><option>H6</option><option>U5</option><option>U7</option>
                <option>V7</option><option>Autre</option>
            </select>
        </label></div>

        <div class="form-group"><label>N¬∞ Vol<input type="text" id="NVol"></label></div>
        <div class="form-group"><label>Provenance<input type="text" id="From"></label></div>
        <div class="form-group"><label>Destination<input type="text" id="To"></label></div>

        <div class="form-group"><label>Immat<input type="text" id="Immat"></label></div>
        <div class="form-group"><label>RZA<input type="text" id="RZA"></label></div>
        <div class="form-group"><label>Parking
            <select id="Parking">
                <option>1</option><option>2</option><option>3</option><option>4</option>
                <option>5</option><option>6</option><option>7</option><option>8</option>
                <option>9</option><option>10</option><option>11</option><option>12</option>
            </select>
        </label></div>

        <div class="form-group"><label>FNC
            <select id="FNC">
                <option>Y</option><option selected>N</option>
            </select>
        </label></div>
    </div>
</section>

<!-- HORAIRES -->
<section>
    <h2>HORAIRES</h2>
    <div class="form-grid">
        <div class="form-group">
            <label>SIBT<input type="time" id="SIBT"></label>
            <div class="btn-actions">
                <button class="action minus" onclick="adjustTime('SIBT',-1)">-1</button>
                <button class="action now" onclick="setNow('SIBT')">Now</button>
                <button class="action plus" onclick="adjustTime('SIBT',1)">+1</button>
            </div>
        </div>
        <div class="form-group">
            <label>AIBT<input type="time" id="AIBT"></label>
            <div class="btn-actions">
                <button class="action minus" onclick="adjustTime('AIBT',-1)">-1</button>
                <button class="action now" onclick="setNow('AIBT')">Now</button>
                <button class="action plus" onclick="adjustTime('AIBT',1)">+1</button>
            </div>
        </div>
        <div class="form-group">
            <label>SOBT<input type="time" id="SOBT" onchange="updateTimers()"></label>
            <div class="btn-actions">
                <button class="action minus" onclick="adjustTime('SOBT',-1);updateTimers()">-1</button>
                <button class="action now" onclick="setNow('SOBT');updateTimers()">Now</button>
                <button class="action plus" onclick="adjustTime('SOBT',1);updateTimers()">+1</button>
            </div>
        </div>
        <div class="form-group">
            <label>AOBT<input type="time" id="AOBT"></label>
            <div class="btn-actions">
                <button class="action minus" onclick="adjustTime('AOBT',-1)">-1</button>
                <button class="action now" onclick="setNow('AOBT')">Now</button>
                <button class="action plus" onclick="adjustTime('AOBT',1)">+1</button>
            </div>
        </div>
    </div>
</section>

<!-- TIMING -->
<section>
    <h2>TIMING</h2>
    <div class="form-grid" id="timing-grid"></div>
</section>

<!-- RETARDS -->
<section>
    <h2>RETARDS (D√©part)</h2>
    <div class="form-grid">
        <div class="form-group"><label>DL Code 1<input type="text" id="DLcode1"></label></div>
        <div class="form-group"><label>DL Dur√©e 1 (min)<input type="number" id="DLduree1"></label></div>
        <div class="form-group"><label>DL Code 2<input type="text" id="DLcode2"></label></div>
        <div class="form-group"><label>DL Dur√©e 2 (min)<input type="number" id="DLduree2"></label></div>
        <div class="form-group"><label>DL Code 3<input type="text" id="DLcode3"></label></div>
        <div class="form-group"><label>DL Dur√©e 3 (min)<input type="number" id="DLduree3"></label></div>
    </div>
</section>

<!-- DL JUSTIFICATION -->
<section>
    <h2>DL Justification</h2>
    <textarea id="DLJustif"></textarea>
</section>

<!-- FAITS SAILLANTS -->
<section>
    <h2>Faits saillants</h2>
    <textarea id="FaitsSaillants"></textarea>
</section>

<!-- ASSISTANCES -->
<section>
    <h2>Assistances prises en charge A/D</h2>
    <div class="form-grid">
        <div class="form-group"><label>WCHC<input type="number" id="WCHC"></label></div>
        <div class="form-group"><label>WCHS<input type="number" id="WCHS"></label></div>
        <div class="form-group"><label>WCHR<input type="number" id="WCHR"></label></div>
        <div class="form-group"><label>Autre<input type="number" id="AutreAssist"></label></div>
    </div>
</section>

<!-- PRESTATIONS -->
<section>
    <h2>Prestations</h2>
    <div class="form-grid">
        <div class="form-group-3col"><label>ASU<select id="ASU"><option>N</option><option>Y</option></select></label></div>
        <div class="form-group-3col"><label>Flux RZA<select id="FluxRZA"><option>N</option><option>Y</option></select></label></div>
        <div class="form-group-3col"><label>Eau potable<select id="EauPotable"><option>N</option><option>Y</option></select></label></div>
        <div class="form-group-3col"><label>Vidange toilettes<select id="Vidange"><option>N</option><option>Y</option></select></label></div>
        <div class="form-group-3col"><label>M√©nage Assist'Air<select id="MenageAssist"><option>N</option><option>Y</option></select></label></div>
        <div class="form-group-3col"><label>M√©nage Atalian<select id="MenageAtalian"><option>N</option><option>T</option><option>F</option></select></label></div>
        <div class="form-group-3col"><label>Collecte d'ordures<select id="Ordures"><option>Y</option><option>N</option></select></label></div>
        <div class="form-group-3col"><label>Echelle suppl√©mentaire<select id="Echelle"><option>N</option><option>Y</option></select></label></div>
        <div class="form-group-3col"><label>D√©givrage<select id="Degivrage"><option>N</option><option>Y</option></select></label></div>
        <div class="form-group-3col"><label>Toilet Kit<select id="ToiletKit"><option>N</option><option>Y</option></select></label></div>
        <div class="form-group-3col"><label>Push-Pull<select id="PushPull"><option>N</option><option>Y</option></select></label></div>
    </div>
</section>

<button id="validate">VALIDER</button>

<script>
// Mode sombre
function toggleDarkMode() {
    document.body.classList.toggle('dark');
}

// Mode Local/UTC
let isUTC = false;
function toggleTimeMode() {
    const inputs = document.querySelectorAll('input[type="time"]');
    inputs.forEach(input => {
        if (!input.value) return;
        let [hh, mm] = input.value.split(':').map(Number);
        hh = isUTC ? hh + 2 : hh - 2; // ajustement
        if (hh < 0) hh += 24;
        if (hh >= 24) hh -= 24;
        input.value = `${String(hh).padStart(2,'0')}:${String(mm).padStart(2,'0')}`;
    });
    isUTC = !isUTC;
}

// Boutons horaires
function setNow(fieldId) {
    const now = new Date();
    const hh = String(now.getHours()).padStart(2,'0');
    const mm = String(now.getMinutes()).padStart(2,'0');
    document.getElementById(fieldId).value = `${hh}:${mm}`;
}
function adjustTime(fieldId, delta) {
    const input = document.getElementById(fieldId);
    if (!input.value) return;
    let [hh, mm] = input.value.split(':').map(Number);
    let d = new Date();
    d.setHours(hh);
    d.setMinutes(mm + delta);
    input.value = `${String(d.getHours()).padStart(2,'0')}:${String(d.getMinutes()).padStart(2,'0')}`;
}

// G√©n√©rer les champs Timing
const timings = [
    "ArrPNT","ArrPNC","PremierDebarque","DernierDebarque",
    "AvionPremierEmbarque","AvionDernierEmbarque",
    "PortePremierEmbarque","PorteDernierEmbarque",
    "FermeturePorteAvion","ArriveeFuel","DepartFuel",
    "ArriveeLift","DepartLift"
];
const timingLabels = [
    "Arriv√©e PNT avion","Arriv√©e PNC avion","Premier d√©barqu√©","Dernier d√©barqu√©",
    "Avion : Premier embarqu√©","Avion : Dernier embarqu√©",
    "Porte : Premier embarqu√©","Porte : Dernier embarqu√©",
    "Fermeture porte avion","Arriv√©e Fuel","D√©part Fuel",
    "Arriv√©e Lift","D√©part Lift"
];
const container = document.getElementById('timing-grid');
timings.forEach((id, i) => {
    const div = document.createElement('div');
    div.className = 'form-group';
    div.innerHTML = `
        <label>${timingLabels[i]}<input type="time" id="${id}"></label>
        <div class="btn-actions">
            <button class="action minus" onclick="adjustTime('${id}',-1)">-1</button>
            <button class="action now" onclick="setNow('${id}')">Now</button>
            <button class="action plus" onclick="adjustTime('${id}',1)">+1</button>
        </div>
    `;
    container.appendChild(div);
});

// Calcul H-15 et H-8 (LID)
function updateTimers() {
    const sobt = document.getElementById('SOBT').value;
    if (!sobt) {
        document.getElementById('timer-h15').textContent = '--:--';
        document.getElementById('timer-h8').textContent = '--:--';
        return;
    }
    const [hh, mm] = sobt.split(':').map(Number);
    const base = new Date();
    base.setHours(hh);
    base.setMinutes(mm);

    const h15 = new Date(base.getTime() - 15*60000);
    const h8 = new Date(base.getTime() - 8*60000);

    document.getElementById('timer-h15').textContent =
        `${String(h15.getHours()).padStart(2,'0')}:${String(h15.getMinutes()).padStart(2,'0')}`;
    document.getElementById('timer-h8').textContent =
        `${String(h8.getHours()).padStart(2,'0')}:${String(h8.getMinutes()).padStart(2,'0')}`;
}
</script>

</body>
</html>
